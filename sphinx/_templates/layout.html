{% extends "base" %}

{% from 'elements.html' import breadcrumbs       with context %}
{% from 'elements.html' import navbar            with context %}
{% from 'elements.html' import language_selector with context %}

{% set page = {"slug": "documentation"} %}
{% set script_files = script_files + ['_static/jquery.pin.min.js', '_static/headers.js'] %}
{% set css_files = ['_static/sphinx_design.css'] + css_files %}

{% set main_page = title in ['Documentation', 'Документация'] %}

{% set render_sidebar = true %}
{% if theme_nosidebar == true or main_page %}
{%   set render_sidebar = false %}
{% endif %}

{% set content_pane %}
  <article class="b-article">
    {% if render_sidebar == false and not main_page %}
      {{ toctree(maxdepth=2, collapse=false) }}
    {% endif %}
    {% block body %} {% endblock %}
  </article>
{% endset %}

{% block content %}
  {% if render_sidebar %}
    <section class="b-lightgray_block b-documentation_top b-clearbox p-documentation_in">
      <div class="b-block-wrapper">
        <h2 class="b-section-title">{{ title | cleantitle }}</h2>
      </div>
    </section>
    <div class="b-cols_content b-clearbox">
      <div class="b-cols_content_left">
        {% include "searchbox.html" %}
        {{ toctree(maxdepth=2) }}
      </div>
      <div class="b-cols_content_right">
        <div class="b-cols_content_right-slot">
          {{- breadcrumbs() -}}
          {{  content_pane   }}
          {{- navbar(False) -}}
        </div>
      </div>
    </div>
  {% else %}
    <section class="b-lightgray_block b-documentation_top b-clearbox">
      <div class="b-block-wrapper">
        <h2 class="b-section-title">{{ title | cleantitle }}</h2>
        {% include "searchbox.html" %}
      </div>
    </section>
    <section class="b-block b-documentation">
      <div class="b-block-wrapper">
        {{- language_selector() -}}
        {{ content_pane }}
      </div>
    </section>
  {% endif %}
{% endblock content %}

{# vim: syntax=htmldjango ts=2 sts=2 sw=2 expandtab #}
